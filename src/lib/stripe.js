const data = [
  {
    product_id: 1,
    color: "black",
    size: "S",
    stock: 50,
    price: 100000,
  },
  {
    product_id: 1,
    color: "black",
    size: "M",
    stock: 50,
    price: 100000,
  },
  {
    product_id: 1,
    color: "black",
    size: "L",
    stock: 50,
    price: 100000,
  },
  {
    product_id: 1,
    color: "black",
    size: "XL",
    stock: 50,
    price: 110000,
  },
  {
    product_id: 1,
    color: "white",
    size: "S",
    stock: 50,
    price: 100000,
  },
  {
    product_id: 1,
    color: "white",
    size: "M",
    stock: 50,
    price: 100000,
  },
  {
    product_id: 1,
    color: "white",
    size: "L",
    stock: 50,
    price: 100000,
  },
  {
    product_id: 1,
    color: "white",
    size: "XL",
    stock: 50,
    price: 110000,
  },
  {
    product_id: 2,
    color: "black",
    size: "S",
    stock: 60,
    price: 90000,
  },
  {
    product_id: 2,
    color: "black",
    size: "M",
    stock: 60,
    price: 90000,
  },
  {
    product_id: 2,
    color: "black",
    size: "L",
    stock: 60,
    price: 90000,
  },
  {
    product_id: 2,
    color: "black",
    size: "XL",
    stock: 60,
    price: 95000,
  },
  {
    product_id: 2,
    color: "white",
    size: "S",
    stock: 60,
    price: 90000,
  },
  {
    product_id: 2,
    color: "white",
    size: "M",
    stock: 60,
    price: 90000,
  },
  {
    product_id: 2,
    color: "white",
    size: "L",
    stock: 60,
    price: 90000,
  },
  {
    product_id: 2,
    color: "white",
    size: "XL",
    stock: 60,
    price: 95000,
  },
  {
    product_id: 3,
    color: "black",
    size: "S",
    stock: 40,
    price: 120000,
  },
  {
    product_id: 3,
    color: "black",
    size: "M",
    stock: 40,
    price: 120000,
  },
  {
    product_id: 3,
    color: "black",
    size: "L",
    stock: 40,
    price: 120000,
  },
  {
    product_id: 3,
    color: "black",
    size: "XL",
    stock: 40,
    price: 130000,
  },
  {
    product_id: 3,
    color: "white",
    size: "S",
    stock: 40,
    price: 120000,
  },
  {
    product_id: 3,
    color: "white",
    size: "M",
    stock: 40,
    price: 120000,
  },
  {
    product_id: 3,
    color: "white",
    size: "L",
    stock: 40,
    price: 120000,
  },
  {
    product_id: 3,
    color: "white",
    size: "XL",
    stock: 40,
    price: 130000,
  },
  {
    product_id: 4,
    color: "blue",
    size: "S",
    stock: 30,
    price: 80000,
  },
  {
    product_id: 4,
    color: "blue",
    size: "M",
    stock: 30,
    price: 80000,
  },
  {
    product_id: 4,
    color: "blue",
    size: "L",
    stock: 30,
    price: 80000,
  },
  {
    product_id: 4,
    color: "blue",
    size: "XL",
    stock: 30,
    price: 85000,
  },
  {
    product_id: 4,
    color: "red",
    size: "S",
    stock: 30,
    price: 80000,
  },
  {
    product_id: 4,
    color: "red",
    size: "M",
    stock: 30,
    price: 80000,
  },
  {
    product_id: 4,
    color: "red",
    size: "L",
    stock: 30,
    price: 80000,
  },
  {
    product_id: 4,
    color: "red",
    size: "XL",
    stock: 30,
    price: 85000,
  },
  {
    product_id: 5,
    color: "black",
    size: "S",
    stock: 45,
    price: 110000,
  },
  {
    product_id: 5,
    color: "black",
    size: "M",
    stock: 45,
    price: 110000,
  },
  {
    product_id: 5,
    color: "black",
    size: "L",
    stock: 45,
    price: 110000,
  },
  {
    product_id: 5,
    color: "black",
    size: "XL",
    stock: 45,
    price: 120000,
  },
  {
    product_id: 5,
    color: "white",
    size: "S",
    stock: 45,
    price: 110000,
  },
  {
    product_id: 5,
    color: "white",
    size: "M",
    stock: 45,
    price: 110000,
  },
  {
    product_id: 5,
    color: "white",
    size: "L",
    stock: 45,
    price: 110000,
  },
  {
    product_id: 5,
    color: "white",
    size: "XL",
    stock: 45,
    price: 120000,
  },
  {
    product_id: 6,
    color: "blue",
    size: "S",
    stock: 55,
    price: 95000,
  },
  {
    product_id: 6,
    color: "blue",
    size: "M",
    stock: 55,
    price: 95000,
  },
  {
    product_id: 6,
    color: "blue",
    size: "L",
    stock: 55,
    price: 95000,
  },
  {
    product_id: 6,
    color: "blue",
    size: "XL",
    stock: 55,
    price: 100000,
  },
  {
    product_id: 6,
    color: "black",
    size: "S",
    stock: 55,
    price: 95000,
  },
  {
    product_id: 6,
    color: "black",
    size: "M",
    stock: 55,
    price: 95000,
  },
  {
    product_id: 6,
    color: "black",
    size: "L",
    stock: 55,
    price: 95000,
  },
  {
    product_id: 6,
    color: "black",
    size: "XL",
    stock: 55,
    price: 100000,
  },
  {
    product_id: 7,
    color: "red",
    size: "S",
    stock: 65,
    price: 85000,
  },
  {
    product_id: 7,
    color: "red",
    size: "M",
    stock: 65,
    price: 85000,
  },
  {
    product_id: 7,
    color: "red",
    size: "L",
    stock: 65,
    price: 85000,
  },
  {
    product_id: 7,
    color: "red",
    size: "XL",
    stock: 65,
    price: 90000,
  },
  {
    product_id: 7,
    color: "blue",
    size: "S",
    stock: 65,
    price: 85000,
  },
  {
    product_id: 7,
    color: "blue",
    size: "M",
    stock: 65,
    price: 85000,
  },
  {
    product_id: 7,
    color: "blue",
    size: "L",
    stock: 65,
    price: 85000,
  },
  {
    product_id: 7,
    color: "blue",
    size: "XL",
    stock: 65,
    price: 90000,
  },
  {
    product_id: 8,
    color: "green",
    size: "S",
    stock: 35,
    price: 130000,
  },
  {
    product_id: 8,
    color: "green",
    size: "M",
    stock: 35,
    price: 130000,
  },
  {
    product_id: 8,
    color: "green",
    size: "L",
    stock: 35,
    price: 130000,
  },
  {
    product_id: 8,
    color: "green",
    size: "XL",
    stock: 35,
    price: 140000,
  },
  {
    product_id: 8,
    color: "black",
    size: "S",
    stock: 35,
    price: 130000,
  },
  {
    product_id: 8,
    color: "black",
    size: "M",
    stock: 35,
    price: 130000,
  },
  {
    product_id: 8,
    color: "black",
    size: "L",
    stock: 35,
    price: 130000,
  },
  {
    product_id: 8,
    color: "black",
    size: "XL",
    stock: 35,
    price: 140000,
  },
];
const stripe = require("stripe")(
  "sk_test_51Nw69kFzErKAgD5nIo7s005lkR3tXuBSiscK1jyc0Ia2RAVwndel265bbjpIJuKpausKNTrXu6e3H1VjSMYi8Tsl004g5fV861"
);

const deleteAllPrices = async () => {
  try {
    const prices = await stripe.prices.list({ limit: 100 });

    for (const price of prices.data) {
      await stripe.prices.del(price.id);
      console.log(`Price ${price.id} deleted.`);
    }
  } catch (error) {
    console.error("Error deleting prices:", error);
  }
};

const deleteAllProducts = async () => {
  try {
    await deleteAllPrices(); // Delete prices first

    const products = await stripe.products.list({ limit: 100 });

    for (const product of products.data) {
      await stripe.products.del(product.id);
      console.log(`Product ${product.id} deleted.`);
    }
  } catch (error) {
    console.error("Error deleting products:", error);
  }
};

deleteAllProducts();

// (async () => {
//   for (const item of data) {
//     const productName = `product_${item.product_id}_${item.color}_${item.size}`;
//     const priceInCents = item.price * 100; // Convert IDR to cents

//     const product = await stripe.products.create({
//       name: productName,
//       type: "good",
//     });

//     console.log(`Product created: ${product.id}`);

//     const price = await stripe.prices.create({
//       product: product.id,
//       unit_amount: priceInCents, // Amount in cents
//       currency: "idr", // Set currency to IDR
//     });

//     console.log(`Price created for product ${product.id}: ${price.id}`);
//   }
// })();
